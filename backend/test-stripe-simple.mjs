#!/usr/bin/env node\n\n/**\n * Simple Stripe Configuration Test\n * ===============================\n * Quick test to verify Stripe configuration utilities work\n */\n\nimport dotenv from 'dotenv';\nimport { existsSync } from 'fs';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Load environment variables\nconst projectRootDir = path.resolve(__dirname, '..');\nconst envPath = path.resolve(projectRootDir, '.env');\n\nif (existsSync(envPath)) {\n  dotenv.config({ path: envPath });\n} else {\n  console.log('❌ .env file not found!');\n  process.exit(1);\n}\n\nconsole.log('🔧 STRIPE CONFIGURATION TEST');\nconsole.log('============================');\n\nasync function testStripeConfig() {\n  try {\n    console.log('\\n1️⃣ Testing Environment Inspector...');\n    const { inspectStripeEnvironment } = await import('./utils/environmentInspector.mjs');\n    const inspection = inspectStripeEnvironment();\n    console.log(`   Summary: ${inspection.summary.existing} found, ${inspection.summary.missing} missing`);\n    \n    console.log('\\n2️⃣ Testing Stripe Config Validator...');\n    const { validateStripeConfig } = await import('./utils/stripeConfig.mjs');\n    const config = validateStripeConfig();\n    console.log(`   Configured: ${config.isConfigured}`);\n    console.log(`   Environment: ${config.environment}`);\n    console.log(`   Errors: ${config.errors.length}`);\n    \n    console.log('\\n3️⃣ Testing API Key Checker...');\n    const { isStripeEnabled } = await import('./utils/apiKeyChecker.mjs');\n    const enabled = isStripeEnabled();\n    console.log(`   Stripe Enabled: ${enabled}`);\n    \n    // Overall assessment\n    const allGood = inspection.summary.missing === 0 && \n                   inspection.summary.formatIssues === 0 && \n                   config.isConfigured && \n                   enabled;\n    \n    console.log('\\n📊 OVERALL RESULT:');\n    if (allGood) {\n      console.log('🎉 ✅ Stripe configuration is READY!');\n      console.log(`   Environment: ${config.environment.toUpperCase()}`);\n      console.log('   All components working correctly');\n    } else {\n      console.log('⚠️ ❌ Stripe configuration has ISSUES:');\n      if (inspection.summary.missing > 0) {\n        console.log(`   - ${inspection.summary.missing} environment variables missing`);\n      }\n      if (inspection.summary.formatIssues > 0) {\n        console.log(`   - ${inspection.summary.formatIssues} format issues`);\n      }\n      if (!config.isConfigured) {\n        console.log('   - Stripe configuration invalid');\n        config.errors.forEach(error => console.log(`     • ${error}`));\n      }\n      if (!enabled) {\n        console.log('   - Stripe not enabled by API key checker');\n      }\n    }\n    \n    return allGood;\n    \n  } catch (error) {\n    console.error('❌ Test failed:', error.message);\n    return false;\n  }\n}\n\ntestStripeConfig()\n  .then(success => {\n    console.log('\\n✅ Stripe configuration test completed!');\n    process.exit(success ? 0 : 1);\n  })\n  .catch(error => {\n    console.error('💥 Test script failed:', error);\n    process.exit(1);\n  });
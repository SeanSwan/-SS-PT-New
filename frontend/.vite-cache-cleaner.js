/**
 * Vite Cache Cleaner Script
 * This script creates/updates a cache marker file to signal Vite to invalidate its module cache
 * Run this script when you encounter stale module/compilation issues
 */

const fs = require('fs');
const path = require('path');

// Get the current timestamp as a cache busting marker
const timestamp = new Date().toISOString();

// Create a marker file with updated timestamp
const markerContent = `// Cache invalidation marker: ${timestamp}
// This file is automatically updated to force Vite to invalidate its module cache
// Do not edit this file manually

export const CACHE_VERSION = '${timestamp}';
`;

// Define the marker file path
const markerFilePath = path.join(__dirname, 'src', 'cache-marker.ts');

// Write the marker file
fs.writeFileSync(markerFilePath, markerContent);

console.log(`\x1b[32m✓\x1b[0m Cache marker updated: ${timestamp}`);
console.log('\x1b[33m⚠\x1b[0m Restart your Vite dev server to ensure cache refresh');
